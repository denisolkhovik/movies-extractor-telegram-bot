plugins {
    id 'application'
    id 'org.jetbrains.kotlin.jvm' version '1.3.50'
    id 'org.jetbrains.kotlin.plugin.spring' version '1.3.50'
    id 'org.springframework.boot' version '2.1.9.RELEASE'
}

apply plugin: 'io.spring.dependency-management'

group = 'me.denisolkhovik'
version = '1.0.0'
sourceCompatibility = JavaVersion.VERSION_1_8

repositories {
    mavenLocal()
    mavenCentral()
    maven {
        url "https://dl.bintray.com/ruslanys/maven"
    }
}


dependencies {
    // Spring
    implementation('me.ruslanys.telegraff:telegraff-starter:SNAP')

    implementation("org.jsoup:jsoup:1.13.1")
}

// Jar
application {
    mainClassName = "me.denisolkhovik.extractor.ApplicationKt"
}

jar {
    enabled = true

    manifest {
        attributes("Implementation-Version": version)
    }
}
bootJar {
    classifier 'boot'

    requiresUnpack "**/**kotlin**.jar"
    requiresUnpack "**/**telegraff**.jar"
}

// Kotlin
compileKotlin {
    kotlinOptions {
        freeCompilerArgs = ["-Xjsr305=strict"]
        jvmTarget = "1.8"
    }
}
compileTestKotlin {
    kotlinOptions {
        freeCompilerArgs = ["-Xjsr305=strict"]
        jvmTarget = "1.8"
    }
}